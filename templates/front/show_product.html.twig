{% extends 'base.html.twig' %}

{% block title %}Product {{ product.name }}{% endblock %}

{% block body %}
    <div class="container align-middle">
        <div class="row">
            <div class="col">
                <div class="text-right">
                    <img class="img-thumbnail" 
                            src={% if product.productImages is not empty %}
                                {% for image in product.productImages %}
                                    {% if image.isCover == true %}
                                        "../../images/products/{{ image.imageName }}"
                                    {% endif %}                           
                                {% endfor %}
                            {% else %}
                                "../images/no-image-available.jpg" 
                            {% endif %}
                            id="bigimg"
                            alt="Card image cap"
                            style="max-width:400px"
                            >
                </div>            
                <div class="text-right">
                    {% if product.productImages is not empty %}
                        {% for image in product.productImages %}                            
                            <img class="img-thumbnail" 
                                src="../../images/products/{{ image.imageName }}"
                                alt="Card image cap"
                                style="max-width:100px"
                            >                                               
                        {% endfor %}
                    {% endif %}
                </div>
            </div>
            <div class="col text-center">
                <h3>{{ product.name }}</h3>
                <h6>Ref: {{ product.ean13 }}</h6>
                <div>
                    <br><br>
                    <h4>Prix: {{ product.ttcPrice}}â‚¬</h4><br><br>
                    <p>{{ product.description }}</p>
                    {# <p>{{ dump(session) }}</p> #}
                    <br><br>
                    <form action="{{ path('category_product_show', {'id': product.id}) }}" method="post">
                    <div class="form-group flex row" style="width:50%; height:100%;margin-left:25%;align-content:space-evenly;">
                        <button class="btn btn-secondary d-inline" id="btnmoins">-</button>
                        <div class="col">                                  
                            <input type="text" id="quantity" name="quantity" class="form-control d-inline text-center" value="1">
                        </div>
                        <button class="btn btn-secondary d-inline" id="btnplus">+</button> 
                        <input type="submit" name="submit" value="Ajouter" style="width:100%;top:10%;" class="d-inline col btn btn-success">
                    </div>
                        
                    </form>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
{% block javascripts %}
    <script>
        quantity = document.getElementById("quantity");
        btnplus = document.getElementById("btnplus");
        btnmoins = document.getElementById("btnmoins");

        btnplus.onclick = function onClickBtnPlus(e) {
            e.preventDefault();
            quantity.value ++;
        };
        btnmoins.onclick = function onClickBtnMoins(e) {
            e.preventDefault();
            quantity.value --;

            if (quantity.value < 1) quantity.value = 1;
        };

        var img = document.getElementById("bigimg");
        var imgs = document.getElementsByTagName("img");
        for (var image of imgs) {
            image.onclick = function changeImg(e) {
                console.log('click');
                img.src = this.src;
            }
        }
    </script>
{% endblock %}